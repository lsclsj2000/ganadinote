<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>댕댕이 투두리스트</title>
<link rel="stylesheet" href="/assets/css/todo/todoList.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">
</head>
<body>
	<div class="container">
		<header>
			<div class="header-top">
				<span class="material-icons menu-icon">menu</span>
				<h2>오늘 할 일</h2>
			</div>
			<div class="pet-profiles-wrapper">
				<div class="pet-profiles">
					<div class="pet-profile" data-pet-id="all">
						<img src="/images/imokaycat.jpg" alt="견주 프로필" class="profile-pic">
						<span>me</span>
					</div>
					<div class="pet-profile" data-pet-id="ruby">
						<img src="/images/루비.jpg" alt="루비 프로필" class="profile-pic">
						<span>루비</span>
					</div>
					<div class="pet-profile" data-pet-id="jjongi">
						<img src="/images/쫑이.jpg" alt="쫑이 프로필" class="profile-pic">
						<span>쫑이</span>
					</div>
					<div class="pet-profile" data-pet-id="boksil">
						<img src="/images/복실.jpg" alt="복실 프로필" class="profile-pic">
						<span>복실</span>
					</div>
				</div>
			</div>
			<div class="date-navigation">
				<button>&lt;</button>
				<span>2025년 8월 18일</span>
				<button>&gt;</button>
			</div>
		</header>

		<main>
			<!-- 캘린더 영역 -->
			<div class="calendar-wrapper">
				<div class="calendar-header">
					<button id="prevMonthBtn">&lt;</button>
					<span id="currentMonthYear">2025년 8월</span>
					<button id="nextMonthBtn">&gt;</button>
				</div>
				<div class="calendar-grid">
					<div class="day-header">일</div>
					<div class="day-header">월</div>
					<div class="day-header">화</div>
					<div class="day-header">수</div>
					<div class="day-header">목</div>
					<div class="day-header">금</div>
					<div class="day-header">토</div>
				</div>
			</div>

			<button class="add-todo-btn" onclick="location.href='/createTodo'">할
				일 추가</button>
		</main>

		<!-- 모달창 영역 (초기에는 숨김) -->
		<div class="modal" id="todoModal">
			<div class="modal-content">
				<span class="close-btn">&times;</span>
				<h3 id="modal-date"></h3>
				<ul id="modal-todo-list">
					<!-- JavaScript로 할 일 목록이 여기에 들어갈 예정 -->
				</ul>
				<button id="add-new-todo-btn">할 일 추가하기</button>
			</div>
		</div>

		<script>
		document.addEventListener('DOMContentLoaded', () => {
		    const calendarGrid = document.querySelector('.calendar-grid');
		    const currentMonthYearSpan = document.getElementById('currentMonthYear');
		    const prevMonthBtn = document.getElementById('prevMonthBtn');
		    const nextMonthBtn = document.getElementById('nextMonthBtn');
		    const modal = document.getElementById('todoModal');
		    const modalDate = document.getElementById('modal-date');
		    const closeBtn = document.querySelector('.close-btn');

		    let currentDate = new Date();

		    // 달력 생성 함수
		    function renderCalendar() {
		        const year = currentDate.getFullYear();
		        const month = currentDate.getMonth();

		        currentMonthYearSpan.textContent = `${year}년 ${month + 1}월`;

		        const firstDayOfMonth = new Date(year, month, 1).getDay(); // 이번 달 첫 날의 요일 (0:일, 1:월...)
		        const lastDateOfMonth = new Date(year, month + 1, 0).getDate(); // 이번 달 마지막 날짜

		        calendarGrid.innerHTML = `
		            <div class="day-header">일</div>
		            <div class="day-header">월</div>
		            <div class="day-header">화</div>
		            <div class="day-header">수</div>
		            <div class="day-header">목</div>
		            <div class="day-header">금</div>
		            <div class="day-header">토</div>
		        `;

		        // 이전 달 날짜 채우기 (빈 칸)
		        for (let i = 0; i < firstDayOfMonth; i++) {
		            const emptyDay = document.createElement('div');
		            emptyDay.classList.add('day', 'empty');
		            calendarGrid.appendChild(emptyDay);
		        }

		        // 이번 달 날짜 채우기
		        for (let i = 1; i <= lastDateOfMonth; i++) {
		            const day = document.createElement('div');
		            day.classList.add('day');
		            day.textContent = i;
		            day.setAttribute('data-date', `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`);
		            
		            // 날짜 클릭 이벤트 리스너 추가
		            day.addEventListener('click', () => {
		                const date = day.getAttribute('data-date');
		                modalDate.textContent = date;
		                modal.classList.add('show');
		            });

		            // (하드코딩된 투두리스트 예시를 여기에 추가할 수 있습니다.)
		            if (i === 18) { // 예시로 18일에 할일 블록 추가
		                 day.classList.add('has-todos');
		                 const todoBlock1 = document.createElement('div');
		                 todoBlock1.classList.add('todo-block');
		                 todoBlock1.textContent = '산책';
		                 day.appendChild(todoBlock1);
		                 const todoBlock2 = document.createElement('div');
		                 todoBlock2.classList.add('todo-block');
		                 todoBlock2.textContent = '밥주기';
		                 day.appendChild(todoBlock2);
		            }

		            calendarGrid.appendChild(day);
		        }
		    }

		    // 초기 렌더링
		    renderCalendar();

		    // 이전 달, 다음 달 버튼 이벤트
		    prevMonthBtn.addEventListener('click', () => {
		        currentDate.setMonth(currentDate.getMonth() - 1);
		        renderCalendar();
		    });

		    nextMonthBtn.addEventListener('click', () => {
		        currentDate.setMonth(currentDate.getMonth() + 1);
		        renderCalendar();
		    });

		    // 모달 관련 이벤트 리스너 (기존 코드와 동일)
		    closeBtn.addEventListener('click', () => {
		        modal.classList.remove('show');
		    });

		    window.addEventListener('click', (event) => {
		        if (event.target === modal) {
		            modal.classList.remove('show');
		        }
		    });
		});
        </script>

		<footer>
			<p>광고 영역</p>
		</footer>
	</div>
</body>
</html>