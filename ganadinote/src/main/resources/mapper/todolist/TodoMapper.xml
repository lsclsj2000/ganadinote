<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ganadinote.todolist.mapper.TodoMapper">

    <resultMap id="todoResultMap" type="ganadinote.common.domain.Todo">
        <id property="todoCd" column="todo_cd"/>
        <result property="mbrCd" column="mbr_cd"/>
        <result property="petCd" column="pet_cd"/>
        <result property="routineCd" column="routine_cd"/>
        <result property="todoTitle" column="todo_title"/>
        <result property="todoScheduledDt" column="todo_scheduled_dt"/>
        <result property="todoIsCompleted" column="todo_is_completed"/>
        <result property="regYmdt" column="reg_ymdt"/>
        <result property="mdfcnYmdt" column="mdfcn_ymdt"/>
    </resultMap>

    <select id="getTodosByMbrCd" parameterType="int" resultMap="todoResultMap">
        SELECT
            todo_cd,
            mbr_cd,
            pet_cd,
            routine_cd,
            todo_title,
            todo_scheduled_dt,
            todo_is_completed,
            reg_ymdt,
            mdfcn_ymdt  <!-- 수정 완료! -->
        FROM
            todo
        WHERE
            mbr_cd = #{mbrCd}
        ORDER BY
            todo_scheduled_dt ASC
    </select>
    
    <insert id="addTodo" parameterType="ganadinote.common.domain.Todo">
        INSERT INTO todo (
            mbr_cd, 
            pet_cd, 
            todo_title, 
            todo_scheduled_dt
        ) VALUES (
            #{mbrCd},
            #{petCd},
            #{todoTitle},
            #{todoScheduledDt}
        )
    </insert>
    
    <delete id="deleteTodo" parameterType="long">
        DELETE FROM todo
        WHERE todo_cd = #{todoCd}
    </delete>

</mapper>