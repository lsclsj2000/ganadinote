<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ganadinote.sns.mapper.SnsMapper">

  <insert id="insertPost"
          parameterType="ganadinote.common.domain.SnsPost"
          useGeneratedKeys="true" keyProperty="spCd">
    INSERT INTO sns_post (mbr_cd, sp_cn)
    VALUES (#{mbrCd}, #{spCn})
  </insert>

  <insert id="insertFilesBatch" parameterType="java.util.List">
    INSERT INTO `file` (post_id, file_orgnl_nm, file_stored_nm, file_path, file_size, file_reg_date)
    VALUES
    <foreach collection="list" item="f" separator=",">
      (#{f.postId}, #{f.fileOrgnlNm}, #{f.fileStoredNm}, #{f.filePath}, #{f.fileSize}, NOW())
    </foreach>
  </insert>

</mapper>